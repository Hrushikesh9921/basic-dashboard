<!-- New file: dash.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <!-- <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png"> -->
    <!-- <link rel="icon" type="image/png" href="../assets/img/favicon.ico"> -->
    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> -->
    <title>Employee Engagement Dashboard</title>
    <!-- <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' /> -->
    <!--     Fonts and icons     -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" /> -->
    <!-- CSS Files -->
    <link href="bootstrap.min.css" rel="stylesheet" />
    <link href="light-bootstrap-dashboard.css?v=2.0.0 " rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <!-- <link href="../assets/css/demo.css" rel="stylesheet" /> -->
    <style>
        body {
            color: black;
        }
        img {
            display: block;
        }
        .main-panel {
            padding-left: 0;
        }
        .card {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .card-header, .card-footer {
            background-color: #165164 !important;
            color: #e0e0e0 !important;
                
        }
        .navbar {
            background-color: #165164 !important;
            color: #FBF9F1 !important;
            justify-content: center;
        }
        .navbar a, .navbar-brand, .nav-link, .navbar-nav>li>a {
            color: #FBF9F1 !important;
            text-align: center;
            
        }
        .user-behavior {
            margin-top: 20px; /* Add padding between top navbar and user behavior section */
        }
        .navbar-brand {
            text-align: center;
        }

        .card-body {
            display: flex;
            gap:10px;
            flex-direction: column;
            align-items: center;
            padding: 0 !important;
            flex: 1;
        }
       
        .card-wrapper {
            display: flex;
            flex-direction: column;
            gap:10px;
            justify-content: center;
            align-items: center;
            width: 100%;
        }
         
        .card-image {
            display: block;
            width: 60% !important;
        }
        .card-body-wrapper {
            display: flex;
            gap:15px;
            width: 100%;
            justify-content: center;
            object-fit: contain;
        }
        #chartSection1 {
            width: 100%;
        }
        .ard-title-text {
            color: black;
        }

        .table-container {
    width: 100%; /* Adjust width as needed */
    text-align: left;
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    background-color: #fff;
    border: 1px solid #ddd;
    overflow: hidden;
}

.table-container table {
    width: 100%;
    border-collapse: collapse;
}

.table-container th,
.table-container td {
    border: 1px solid #ddd;
    padding: 8px;
}

#highlight-table {
    width: 100%;
    border-collapse: collapse;
    border: 1px solid #ddd;
}

#highlight-table th, 
#highlight-table td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

#highlight-table th {
    background-color: #639aac;
}

#highlight-table tbody tr:nth-child(even) {
    background-color: #f9f9f9;
}

#highlight-table tbody tr:hover {
    background-color: #f2f2f2;
}

body {
  font-family: sans-serif;
}

.container {
  display: flex;
  align-items: flex-end;
}

.podium__item {
  width: 200px;
}

.podium__rank {
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 35px;
  color: #fff;
}

.podium__city {
  text-align: center;
  padding: 0 .5rem;
  font-weight: bold;
  font-size: 24px;
}

.podium__number {
  width: 27px;
  height: 75px;
}

.podium .first {
  min-height: 300px;
  background: #af5050;
}

.podium .second {
  min-height: 200px;
  background: rgb(90, 90, 162);
}

.podium .third {
  min-height: 100px;
  background: rgb(93, 156, 93);
}

.d-flex {
  display: flex;
  justify-content: center;
}

    </style>
</head>

<body>
    <!-- Main panel content from dashboard.html -->
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg " color-on-scroll="500" style="background-color: #164863; color: #FBF9F1; text-align: center;">
        <div class="container-fluid">
            <a class="navbar-brand" > </a>
            <button href="" class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-bar burger-lines"></span>
                <span class="navbar-toggler-bar burger-lines"></span>
                <span class="navbar-toggler-bar burger-lines"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navigation">
                <ul class="nav navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="navbar-brand" > Employee Experience Portal </a> 
                        <!-- <a href="#" class="nav-link" data-toggle="dropdown">
                            <i class="nc-icon nc-palette"></i>
                            <span class="d-lg-none">Employee Experience Portal</span>
                        </a> -->
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <!-- <li class="nav-item">
                        <a class="nav-link" href="#pablo">
                            <span class="no-icon">Account</span>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span class="no-icon">Dropdown</span>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <a class="dropdown-item" href="#">Something</a>
                            <a class="dropdown-item" href="#">Something else here</a>
                            <div class="divider"></div>
                            <a class="dropdown-item" href="#">Separated link</a>
                        </div>
                    </li> -->
                    <li class="nav-item">
                        <a class="nav-link" href="#pablo">
                            <span class="no-icon">Add New</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="rolling-dash.html">
                            <span class="no-icon" target="_blank">Slide Show</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->
    
    <div class="content user-behavior">
        <div class="container-fluid">
            <!-- User Behavior Section -->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">DeepIntent FitZone</h4>
                        </div>
                        <div class="card-body">
                            <div class="container d-flex justify-content-center">
                                <div class="table-container">
                                    <table id="highlight-table">
                                        <thead>
                                            <tr>
                                                <th>Rank</th>
                                                <th>Name</th>
                                                <th>Calories Burned</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Table rows will be dynamically added here -->
                                        </tbody>
                                    </table>
                                </div>
                                <div class="container podium">
                                    <div class="podium__item" >
                                        <p class="podium__city" id="podiumSecond"></p>
                                        <div class="podium__rank second">2</div>
                                    </div>
                                    <div class="podium__item" >
                                        <p class="podium__city" id="podiumFirst"></p>
                                        <div class="podium__rank first">
                                            <svg class="podium__number" viewBox="0 0 27.476 75.03" xmlns="http://www.w3.org/2000/svg">
                                                <g transform="matrix(1, 0, 0, 1, 214.957736, -43.117417)">
                                                    <path class="st8" d="M -198.928 43.419 C -200.528 47.919 -203.528 51.819 -207.828 55.219 C -210.528 57.319 -213.028 58.819 -215.428 60.019 L -215.428 72.819 C -210.328 70.619 -205.628 67.819 -201.628 64.119 L -201.628 117.219 L -187.528 117.219 L -187.528 43.419 L -198.928 43.419 L -198.928 43.419 Z"
                                                        style="fill: #fffafa;" />
                                                </g>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="podium__item" >
                                        <p class="podium__city" id="podiumThird"></p>
                                        <div class="podium__rank third">3</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div class="card-footer">
                        </div>                    </div>
                </div>
            </div>
            <!-- Section 1 -->
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">DeepIntent Awards</h4>
                        </div>
                        <div class="card-body">
                            <div id="chartSection1" class="ct-chart1"></div>

                        </div>
                        <div class="card-footer">
                        </div>
                    </div>
                </div>
                <!-- Section 2 -->
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Culture @ DeepIntent</h4>
                        </div>
                        <div class="card-body ">
                            <div id="chartSection2" class="ct-chart1"></div>
                        </div>
                        <div class="card-footer">
                        </div>
                    </div>
                </div>
                <!-- Section 3 -->
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Company Events</h4>
                        </div>
                        <div class="card-body">
                            <div id="chartSection3" class="ct-chart1"></div>
                        </div>
                        <div class="card-footer">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>


<script>
    // Function to make API call
    function fetchData() {
      // Replace 'YOUR_API_ENDPOINT' with the actual API endpoint you want to call
      fetch('http://192.168.68.140:1111/fetchdata')
        .then(response => response.json())
        .then(data => {
          // Call function to render data on UI
        //   console.log(data.data)
          renderData(data.data);
        })
        .catch(error => {
          console.error('Error fetching data:', error);
        });
    }

    function renderData(data) {
            const section1 = document.getElementById('chartSection1');
            data.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.classList.add('carousel-item');
                if (index === 0) {
                    itemElement.classList.add('active');
                }
                itemElement.innerHTML = `
                    <div class="card-wrapper">
                        <h3 class="card-title-text">${item.Award}</h3>
                        <div class="card-body-wrapper">
                            <img class="card-image" src="${item.Picture}" alt="Image">
                        </div>
                    <div class="card-footer-wrapper">
                        <h5>${item.Name}</h5>
                        <h5>${item.Reason}</h5>

                    </div>
                    <div>
                `;
                // console.log(itemElement)
                section1.appendChild(itemElement);
            });

            // Rotate images automatically
            const carouselItems = section1.querySelectorAll('.carousel-item');
            // console.log(carouselItems,"cI");
            let currentIndex = 0;

            setInterval(() => {
                // Remove active class from current item
                carouselItems[currentIndex].classList.remove('active');
                // Move to the next item
                currentIndex = (currentIndex + 1) % carouselItems.length;
                // Add active class to the next item
                carouselItems[currentIndex].classList.add('active');
            }, 3000); // Rotate every 3 seconds
        }




        // Function to make API call
        function fetchData1() {
          // Replace 'YOUR_API_ENDPOINT' with the actual API endpoint you want to call
          fetch('http://192.168.68.140:1111/cultureatdi')
            .then(response => response.json())
            .then(data => {
              // Call function to render data on UI
            //   console.log(data.data)
              renderData1(data.data);
            })
            .catch(error => {
              console.error('Error fetching data:', error);
            });
        }
    
    
        function renderData1(data) {
                const section2 = document.getElementById('chartSection2');
                data.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.classList.add('carousel-item');
                    if (index === 0) {
                        itemElement.classList.add('active');
                    }
                    itemElement.innerHTML = `
                        <div class="card-wrapper">
                            <h3 class="card-title-text">${item.Reason}</h3>
                            <div class="card-body-wrapper">
                                <img class="card-image" src="${item.Picture}" alt="Image">
                          
                            </div>
                        <div class="card-footer-wrapper">
                            <h5>${item.Event}</h5>
                            <h5>${item.Reason}</h5>
    
                        </div>
                        <div>
                    `;
                    // console.log(itemElement)
                    section2.appendChild(itemElement);
                });
    
                // Rotate images automatically
                const carouselItems = section2.querySelectorAll('.carousel-item');
                let currentIndex = 0;
    
                setInterval(() => {
                    // Remove active class from current item
                    carouselItems[currentIndex].classList.remove('active');
                    // Move to the next item
                    currentIndex = (currentIndex + 1) % carouselItems.length;
                    // Add active class to the next item
                    carouselItems[currentIndex].classList.add('active');
                }, 3000); // Rotate every 3 seconds
            }
    
    
    
        // Function to make API call
        function fetchData2() {
          // Replace 'YOUR_API_ENDPOINT' with the actual API endpoint you want to call
          fetch('http://192.168.68.140:1111/companyevent')
            .then(response => response.json())
            .then(data => {
              // Call function to render data on UI
            //   console.log(data.data)
              renderData2(data.data);
            })
            .catch(error => {
              console.error('Error fetching data:', error);
            });
        }
    
    
        function renderData2(data) {
                const section3 = document.getElementById('chartSection3');
                data.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.classList.add('carousel-item');
                    if (index === 0) {
                        itemElement.classList.add('active');
                    }
                    itemElement.innerHTML = `
                        <div class="card-wrapper">
                            <h3 class="card-title-text">${item.Event}</h3>
                            <div class="card-body-wrapper">
                                <img class="card-image" src="${item.Picture}" alt="Image">
                          
                            </div>
                        <div class="card-footer-wrapper">
                            <h5>${item.Description}</h5>
    
                        </div>
                        <div>
                    `;
                    // console.log(itemElement)
                    section3.appendChild(itemElement);
                });
    
                // Rotate images automatically
                const carouselItems = section3.querySelectorAll('.carousel-item');
                let currentIndex = 0;
    
                setInterval(() => {
                    // Remove active class from current item
                    carouselItems[currentIndex].classList.remove('active');
                    // Move to the next item
                    currentIndex = (currentIndex + 1) % carouselItems.length;
                    // Add active class to the next item
                    carouselItems[currentIndex].classList.add('active');
                }, 3000); // Rotate every 3 seconds
            }

            // Get reference to the tbody element


// Function to make API call
function fetchfitnesstableData() {

          // Replace 'YOUR_API_ENDPOINT' with the actual API endpoint you want to call
          fetch('http://192.168.68.140:1111/workout')
            .then(response => response.json())
            .then(data => {
              // Call function to render data on UI
            //    console.log(data.data)
            
              renderfitnesstableData(data.data);
            })
            .catch(error => {
              console.error('Error fetching data:', error);
            });
        }

// Function to add rows to the table
function renderfitnesstableData(tableData) {
    const tbody = document.querySelector('.table-container tbody');
    tableData.forEach(data => {

        if (tableData.length === 0) {
                // If there are no records, add 10 empty rows
                for (let i = 0; i < 10; i++) {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td> </td>
                        <td> </td>
                        <td> </td>
                    `;
                    tbody.appendChild(row);
                }
            } else {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${data.Rank}</td>
            <td>${data.Employee}</td>
            <td>${data.Calories}</td>
        `;
        tbody.appendChild(row);
    }
})
};


// Function to make API call
function fetchleaderboardeData() {

// Replace 'YOUR_API_ENDPOINT' with the actual API endpoint you want to call
fetch('http://192.168.68.140:1111/top_three_last_week')
  .then(response => response.json())
  .then(data => {
    // Call function to render data on UI
     console.log(data.data)
    renderleaderboardData(data.data);
  })
  .catch(error => {
    console.error('Error fetching data:', error);
  });
}

function renderleaderboardData(data) {
    // const tbody = document.querySelector('.container podium');
    
    data.forEach(data => {
        // <p class="podium__city">Annecy</p>
        // const row = document.createElement('p');
        console.log(data.Rank)
        if (data.Rank === 1){
            document.getElementById('podiumFirst').innerText = data.Employee;
            // document.getElementById('podiumFirst').innerText = data.Employee;
            // document.getElementById('podiumFirst').style.height = `400px`;
            // document.getElementById('podiumFirst').style.backgroundColor = `#ffffff`;
            // podium1.innerHTML = data.Employee;
        } else if (data.Rank === 2){
            document.getElementById('podiumSecond').innerText = data.Employee;
            // document.getElementById('podiumSecond').style.height = `250px`;   
        } else if (data.Rank === 3){
            document.getElementById('podiumThird').innerText = data.Employee 
            // document.getElementById('podiumThird').style.height = `100px`;   

        }
        
        // itemElement.classList.add('active');
        
      
        
    }

)}
;

    
            function fetching() {
                fetchData();
                fetchData1();
                fetchData2();
                fetchfitnesstableData();
                fetchleaderboardeData();
            }

        window.onload = fetching;
        </script>
        



</html>


